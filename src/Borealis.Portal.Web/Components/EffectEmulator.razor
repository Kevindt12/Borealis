@using MudBlazor;
@using Borealis.Domain.Devices
@using Borealis.Domain.Effects
@using Borealis.Portal.Core.Effects


@* ReSharper disable InconsistentNaming | This is because i want to threat them as fields. I know this is just a autistic thing.*@
@inject ILogger<EffectEmulator> _logger

@inject EffectEngineFactory _effectEngineFactory
@inject ISnackbar _snackbar
@* ReSharper restore InconsistentNaming *@



@* Toolbar *@
<MudToolBar Class="pa-2" Dense="true">
    @* Start stop. *@
    <MudIconButton Class="pa-2" Icon="@Icons.Material.Filled.Start" Disabled="IsRunning" Color="@(IsRunning ? Color.Success : Color.Secondary)" OnClick="StartAsync" />
    <MudIconButton Class="pa-2" Icon="@Icons.Material.Filled.Stop" Disabled="!IsRunning" Color="@(IsRunning ? Color.Error : Color.Secondary)" OnClick="Stop" />
    <MudDivider />

    @* Length *@
    <MudNumericField T="int" Class="pa-2" @bind-Value="Length" Variant="Variant.Text" Label="Length" />
    <MudDivider />

    @* Frequency *@
    <MudNumericField T="double"
                     Class="pa-2"
                     @bind-Value="Frequency"
                     Variant="Variant.Text"
                     Label="Frequency"
                     HelperText="The frequency in hertz that we should play the animation at." />
    <MudDivider />

    @* Color spectrum. *@
    <MudSelect T="ColorSpectrum" Class="pa-2" Variant="Variant.Text" Label="Color Spectrum" @bind-Value="ColorSpectrum">
        <MudSelectItem T="ColorSpectrum" Value="ColorSpectrum.Rgb">Rgb</MudSelectItem>
        <MudSelectItem T="ColorSpectrum" Value="ColorSpectrum.Rgbw">Rgb white</MudSelectItem>
        <MudSelectItem T="ColorSpectrum" Value="ColorSpectrum.Rgbww">Rgb double white</MudSelectItem>
    </MudSelect>
</MudToolBar>
<MudDivider />

@* The pixels.*@
<MudPaper Class="pa-2" MinHeight="200px" MinWidth="1200px" Outlined="true">
    <MudStack Class="pa-1" Row="true" Justify="Justify.FlexStart" AlignItems="AlignItems.Start">

        @for (int i = 0; i < Pixels.Length; i++)
        {
            <PixelComponent Height="5" Width="5" Class="pa-1" PixelColor="Pixels[i]"></PixelComponent>
        }

    </MudStack>
</MudPaper>

@* The outpput Console*@
<MudPaper Class="pa-2" MinHeight="200px" MinWidth="1200px" Outlined="true">
    <MudTextField T="string"
                  Label="Console"
                  Lines="20"
                  Variant="Variant.Text"
                  InputMode="InputMode.text"
                  ReadOnly="true"
                  @bind-Value="LogOutput" />
</MudPaper>


